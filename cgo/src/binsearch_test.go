package binsearch

import "testing"
import "os"

var mf TMMFile

var testDataBE8 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint8
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x00, 0, 0, 1, 1, 2, 1},
	{0, 1, 250, 0x00, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x01, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0f, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x10, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x1f, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x20, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x2f, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x30, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x3f, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x40, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x4f, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x50, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x5f, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x60, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x6f, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x70, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x7f, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x80, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x8f, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x90, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x9f, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0xa0, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0xaf, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0xb0, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0xbf, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0xc0, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0xcf, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0xd0, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0xdf, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0xe0, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0xef, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0xf0, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0xf8, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0xff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0xf9, 251, 250, 249, 251, 250, 249},
	{0, 0, 50, 0x70, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x70, 251, 150, 149, 251, 150, 149},
}

var testDataBESub8 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint8
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x00, 0, 0, 1, 1, 2, 1},
	{0, 1, 250, 0x00, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x01, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0f, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x10, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x1f, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x20, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x2f, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x30, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x3f, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x40, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x4f, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x50, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x5f, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x60, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x6f, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x70, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x7f, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x80, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x8f, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x90, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x9f, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0xa0, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0xaf, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0xb0, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0xbf, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0xc0, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0xcf, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0xd0, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0xdf, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0xe0, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0xef, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0xf0, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0xf8, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0xff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0xf9, 251, 250, 249, 251, 250, 249},
	{0, 0, 50, 0x70, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x70, 251, 150, 149, 251, 150, 149},
}

var testDataLE8 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint8
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{15, 0, 250, 0x00, 0, 0, 1, 1, 2, 1},
	{15, 1, 250, 0x00, 1, 1, 0, 1, 2, 1},
	{15, 0, 250, 0x01, 2, 2, 1, 2, 3, 2},
	{15, 0, 250, 0x0f, 16, 16, 15, 16, 17, 16},
	{15, 0, 250, 0x10, 17, 17, 16, 17, 18, 17},
	{15, 0, 250, 0x1f, 32, 32, 31, 32, 33, 32},
	{15, 0, 250, 0x20, 33, 33, 32, 33, 34, 33},
	{15, 0, 250, 0x2f, 48, 48, 47, 48, 49, 48},
	{15, 0, 250, 0x30, 49, 49, 48, 49, 50, 49},
	{15, 0, 250, 0x3f, 64, 64, 63, 64, 65, 64},
	{15, 0, 250, 0x40, 65, 65, 64, 65, 66, 65},
	{15, 0, 250, 0x4f, 80, 80, 79, 80, 81, 80},
	{15, 0, 250, 0x50, 81, 81, 80, 81, 82, 81},
	{15, 0, 250, 0x5f, 96, 96, 95, 96, 97, 96},
	{15, 0, 250, 0x60, 97, 97, 96, 97, 98, 97},
	{15, 0, 250, 0x6f, 112, 112, 111, 112, 113, 112},
	{15, 0, 250, 0x70, 113, 113, 112, 113, 114, 113},
	{15, 0, 250, 0x7f, 128, 128, 127, 128, 129, 128},
	{15, 0, 250, 0x80, 129, 129, 128, 129, 130, 129},
	{15, 0, 250, 0x8f, 144, 144, 143, 144, 145, 144},
	{15, 0, 250, 0x90, 145, 145, 144, 145, 146, 145},
	{15, 0, 250, 0x9f, 160, 160, 159, 160, 161, 160},
	{15, 0, 250, 0xa0, 161, 161, 160, 161, 162, 161},
	{15, 0, 250, 0xaf, 176, 176, 175, 176, 177, 176},
	{15, 0, 250, 0xb0, 177, 177, 176, 177, 178, 177},
	{15, 0, 250, 0xbf, 192, 192, 191, 192, 193, 192},
	{15, 0, 250, 0xc0, 193, 193, 192, 193, 194, 193},
	{15, 0, 250, 0xcf, 208, 208, 207, 208, 209, 208},
	{15, 0, 250, 0xd0, 209, 209, 208, 209, 210, 209},
	{15, 0, 250, 0xdf, 224, 224, 223, 224, 225, 224},
	{15, 0, 250, 0xe0, 225, 225, 224, 225, 226, 225},
	{15, 0, 250, 0xef, 240, 240, 239, 240, 241, 240},
	{15, 0, 250, 0xf0, 241, 241, 240, 241, 242, 241},
	{15, 0, 250, 0xf8, 249, 249, 248, 249, 250, 249},
	{15, 0, 250, 0xff, 250, 250, 249, 250, 251, 250},
	{15, 0, 250, 0xf9, 251, 250, 249, 251, 250, 249},
	{15, 0, 50, 0x70, 51, 51, 50, 51, 51, 50},
	{15, 150, 250, 0x70, 251, 150, 149, 251, 150, 149},
}

var testDataLESub8 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint8
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{15, 0, 250, 0x00, 0, 0, 1, 1, 2, 1},
	{15, 1, 250, 0x00, 1, 1, 0, 1, 2, 1},
	{15, 0, 250, 0x01, 2, 2, 1, 2, 3, 2},
	{15, 0, 250, 0x0f, 16, 16, 15, 16, 17, 16},
	{15, 0, 250, 0x10, 17, 17, 16, 17, 18, 17},
	{15, 0, 250, 0x1f, 32, 32, 31, 32, 33, 32},
	{15, 0, 250, 0x20, 33, 33, 32, 33, 34, 33},
	{15, 0, 250, 0x2f, 48, 48, 47, 48, 49, 48},
	{15, 0, 250, 0x30, 49, 49, 48, 49, 50, 49},
	{15, 0, 250, 0x3f, 64, 64, 63, 64, 65, 64},
	{15, 0, 250, 0x40, 65, 65, 64, 65, 66, 65},
	{15, 0, 250, 0x4f, 80, 80, 79, 80, 81, 80},
	{15, 0, 250, 0x50, 81, 81, 80, 81, 82, 81},
	{15, 0, 250, 0x5f, 96, 96, 95, 96, 97, 96},
	{15, 0, 250, 0x60, 97, 97, 96, 97, 98, 97},
	{15, 0, 250, 0x6f, 112, 112, 111, 112, 113, 112},
	{15, 0, 250, 0x70, 113, 113, 112, 113, 114, 113},
	{15, 0, 250, 0x7f, 128, 128, 127, 128, 129, 128},
	{15, 0, 250, 0x80, 129, 129, 128, 129, 130, 129},
	{15, 0, 250, 0x8f, 144, 144, 143, 144, 145, 144},
	{15, 0, 250, 0x90, 145, 145, 144, 145, 146, 145},
	{15, 0, 250, 0x9f, 160, 160, 159, 160, 161, 160},
	{15, 0, 250, 0xa0, 161, 161, 160, 161, 162, 161},
	{15, 0, 250, 0xaf, 176, 176, 175, 176, 177, 176},
	{15, 0, 250, 0xb0, 177, 177, 176, 177, 178, 177},
	{15, 0, 250, 0xbf, 192, 192, 191, 192, 193, 192},
	{15, 0, 250, 0xc0, 193, 193, 192, 193, 194, 193},
	{15, 0, 250, 0xcf, 208, 208, 207, 208, 209, 208},
	{15, 0, 250, 0xd0, 209, 209, 208, 209, 210, 209},
	{15, 0, 250, 0xdf, 224, 224, 223, 224, 225, 224},
	{15, 0, 250, 0xe0, 225, 225, 224, 225, 226, 225},
	{15, 0, 250, 0xef, 240, 240, 239, 240, 241, 240},
	{15, 0, 250, 0xf0, 241, 241, 240, 241, 242, 241},
	{15, 0, 250, 0xf8, 249, 249, 248, 249, 250, 249},
	{15, 0, 250, 0xff, 250, 250, 249, 250, 251, 250},
	{15, 0, 250, 0xf9, 251, 250, 249, 251, 250, 249},
	{15, 0, 50, 0x70, 51, 51, 50, 51, 51, 50},
	{15, 150, 250, 0x70, 251, 150, 149, 251, 150, 149},
}

var testDataBE16 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint16
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x0000, 0, 0, 1, 0, 1, 0},
	{0, 1, 250, 0x0001, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x0102, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0f10, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x1011, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x1f20, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x2021, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x2f30, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x3031, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x3f40, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x4041, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x4f50, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x5051, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x5f60, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x6061, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x6f70, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x7071, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x7f80, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x8081, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x8f90, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x9091, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x9fa0, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0xa0a1, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0xafb0, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0xb0b1, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0xbfc0, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0xc0c1, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0xcfd0, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0xd0d1, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0xdfe0, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0xe0e1, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0xeff0, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0xf0f1, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0xf8f9, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0xffff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0xf9f9, 251, 250, 249, 251, 250, 249},
	{0, 0, 50, 0x7071, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x7071, 251, 150, 149, 251, 150, 149},
}

var testDataBESub16 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint16
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x0000, 0, 0, 1, 0, 1, 0},
	{0, 1, 250, 0x0001, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x0102, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0f10, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x1011, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x1f20, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x2021, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x2f30, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x3031, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x3f40, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x4041, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x4f50, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x5051, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x5f60, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x6061, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x6f70, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x7071, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x7f80, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x8081, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x8f90, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x9091, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x9fa0, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0xa0a1, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0xafb0, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0xb0b1, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0xbfc0, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0xc0c1, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0xcfd0, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0xd0d1, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0xdfe0, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0xe0e1, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0xeff0, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0xf0f1, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0xf8f9, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0xffff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0xf9f9, 251, 250, 249, 251, 250, 249},
	{0, 0, 50, 0x7071, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x7071, 251, 150, 149, 251, 150, 149},
}

var testDataLE16 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint16
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{14, 0, 250, 0x0000, 0, 0, 1, 0, 1, 0},
	{14, 1, 250, 0x0001, 1, 1, 0, 1, 2, 1},
	{14, 0, 250, 0x0102, 2, 2, 1, 2, 3, 2},
	{14, 0, 250, 0x0f10, 16, 16, 15, 16, 17, 16},
	{14, 0, 250, 0x1011, 17, 17, 16, 17, 18, 17},
	{14, 0, 250, 0x1f20, 32, 32, 31, 32, 33, 32},
	{14, 0, 250, 0x2021, 33, 33, 32, 33, 34, 33},
	{14, 0, 250, 0x2f30, 48, 48, 47, 48, 49, 48},
	{14, 0, 250, 0x3031, 49, 49, 48, 49, 50, 49},
	{14, 0, 250, 0x3f40, 64, 64, 63, 64, 65, 64},
	{14, 0, 250, 0x4041, 65, 65, 64, 65, 66, 65},
	{14, 0, 250, 0x4f50, 80, 80, 79, 80, 81, 80},
	{14, 0, 250, 0x5051, 81, 81, 80, 81, 82, 81},
	{14, 0, 250, 0x5f60, 96, 96, 95, 96, 97, 96},
	{14, 0, 250, 0x6061, 97, 97, 96, 97, 98, 97},
	{14, 0, 250, 0x6f70, 112, 112, 111, 112, 113, 112},
	{14, 0, 250, 0x7071, 113, 113, 112, 113, 114, 113},
	{14, 0, 250, 0x7f80, 128, 128, 127, 128, 129, 128},
	{14, 0, 250, 0x8081, 129, 129, 128, 129, 130, 129},
	{14, 0, 250, 0x8f90, 144, 144, 143, 144, 145, 144},
	{14, 0, 250, 0x9091, 145, 145, 144, 145, 146, 145},
	{14, 0, 250, 0x9fa0, 160, 160, 159, 160, 161, 160},
	{14, 0, 250, 0xa0a1, 161, 161, 160, 161, 162, 161},
	{14, 0, 250, 0xafb0, 176, 176, 175, 176, 177, 176},
	{14, 0, 250, 0xb0b1, 177, 177, 176, 177, 178, 177},
	{14, 0, 250, 0xbfc0, 192, 192, 191, 192, 193, 192},
	{14, 0, 250, 0xc0c1, 193, 193, 192, 193, 194, 193},
	{14, 0, 250, 0xcfd0, 208, 208, 207, 208, 209, 208},
	{14, 0, 250, 0xd0d1, 209, 209, 208, 209, 210, 209},
	{14, 0, 250, 0xdfe0, 224, 224, 223, 224, 225, 224},
	{14, 0, 250, 0xe0e1, 225, 225, 224, 225, 226, 225},
	{14, 0, 250, 0xeff0, 240, 240, 239, 240, 241, 240},
	{14, 0, 250, 0xf0f1, 241, 241, 240, 241, 242, 241},
	{14, 0, 250, 0xf8f9, 249, 249, 248, 249, 250, 249},
	{14, 0, 250, 0xffff, 250, 250, 249, 250, 251, 250},
	{14, 0, 250, 0xf9f9, 251, 250, 249, 251, 250, 249},
	{14, 0, 50, 0x7071, 51, 51, 50, 51, 51, 50},
	{14, 150, 250, 0x7071, 251, 150, 149, 251, 150, 149},
}

var testDataLESub16 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint16
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{14, 0, 250, 0x0000, 0, 0, 1, 0, 1, 0},
	{14, 1, 250, 0x0001, 1, 1, 0, 1, 2, 1},
	{14, 0, 250, 0x0102, 2, 2, 1, 2, 3, 2},
	{14, 0, 250, 0x0f10, 16, 16, 15, 16, 17, 16},
	{14, 0, 250, 0x1011, 17, 17, 16, 17, 18, 17},
	{14, 0, 250, 0x1f20, 32, 32, 31, 32, 33, 32},
	{14, 0, 250, 0x2021, 33, 33, 32, 33, 34, 33},
	{14, 0, 250, 0x2f30, 48, 48, 47, 48, 49, 48},
	{14, 0, 250, 0x3031, 49, 49, 48, 49, 50, 49},
	{14, 0, 250, 0x3f40, 64, 64, 63, 64, 65, 64},
	{14, 0, 250, 0x4041, 65, 65, 64, 65, 66, 65},
	{14, 0, 250, 0x4f50, 80, 80, 79, 80, 81, 80},
	{14, 0, 250, 0x5051, 81, 81, 80, 81, 82, 81},
	{14, 0, 250, 0x5f60, 96, 96, 95, 96, 97, 96},
	{14, 0, 250, 0x6061, 97, 97, 96, 97, 98, 97},
	{14, 0, 250, 0x6f70, 112, 112, 111, 112, 113, 112},
	{14, 0, 250, 0x7071, 113, 113, 112, 113, 114, 113},
	{14, 0, 250, 0x7f80, 128, 128, 127, 128, 129, 128},
	{14, 0, 250, 0x8081, 129, 129, 128, 129, 130, 129},
	{14, 0, 250, 0x8f90, 144, 144, 143, 144, 145, 144},
	{14, 0, 250, 0x9091, 145, 145, 144, 145, 146, 145},
	{14, 0, 250, 0x9fa0, 160, 160, 159, 160, 161, 160},
	{14, 0, 250, 0xa0a1, 161, 161, 160, 161, 162, 161},
	{14, 0, 250, 0xafb0, 176, 176, 175, 176, 177, 176},
	{14, 0, 250, 0xb0b1, 177, 177, 176, 177, 178, 177},
	{14, 0, 250, 0xbfc0, 192, 192, 191, 192, 193, 192},
	{14, 0, 250, 0xc0c1, 193, 193, 192, 193, 194, 193},
	{14, 0, 250, 0xcfd0, 208, 208, 207, 208, 209, 208},
	{14, 0, 250, 0xd0d1, 209, 209, 208, 209, 210, 209},
	{14, 0, 250, 0xdfe0, 224, 224, 223, 224, 225, 224},
	{14, 0, 250, 0xe0e1, 225, 225, 224, 225, 226, 225},
	{14, 0, 250, 0xeff0, 240, 240, 239, 240, 241, 240},
	{14, 0, 250, 0xf0f1, 241, 241, 240, 241, 242, 241},
	{14, 0, 250, 0xf8f9, 249, 249, 248, 249, 250, 249},
	{14, 0, 250, 0xffff, 250, 250, 249, 250, 251, 250},
	{14, 0, 250, 0xf9f9, 251, 250, 249, 251, 250, 249},
	{14, 0, 50, 0x7071, 51, 51, 50, 51, 51, 50},
	{14, 150, 250, 0x7071, 251, 150, 149, 251, 150, 149},
}

var testDataBE32 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint32
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x00000000, 0, 0, 1, 0, 1, 0},
	{0, 1, 250, 0x00010203, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x01020304, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0f101112, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x10111213, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x1f202122, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x20212223, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x2f303132, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x30313233, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x3f404142, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x40414243, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x4f505152, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x50515253, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x5f606162, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x60616263, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x6f707172, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x70717273, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x7f808182, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x80818283, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x8f909192, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x90919293, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x9fa0a1a2, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0xa0a1a2a3, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0xafb0b1b2, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0xb0b1b2b3, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0xbfc0c1c2, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0xc0c1c2c3, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0xcfd0d1d2, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0xd0d1d2d3, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0xdfe0e1e2, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0xe0e1e2e3, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0xeff0f1f2, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0xf0f1f2f3, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0xf8f9fafb, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0xffffffff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0xf9f9fafb, 251, 250, 249, 251, 250, 249},
	{0, 0, 50, 0x70717273, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x70717273, 251, 150, 149, 251, 150, 149},
}

var testDataBESub32 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint32
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x00000000, 0, 0, 1, 0, 1, 0},
	{0, 1, 250, 0x00000102, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x00000203, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x00001011, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x00001112, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x00002021, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x00002122, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x00003031, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x00003132, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x00004041, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x00004142, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x00005051, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x00005152, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x00006061, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x00006162, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x00007071, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x00007172, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x00008081, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x00008182, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x00009091, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x00009192, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x0000a0a1, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0x0000a1a2, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0x0000b0b1, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0x0000b1b2, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0x0000c0c1, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0x0000c1c2, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0x0000d0d1, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0x0000d1d2, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0x0000e0e1, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0x0000e1e2, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0x0000f0f1, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0x0000f1f2, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0x0000f9fa, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0x0000ffff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0x0000f9fa, 249, 249, 248, 249, 250, 249},
	{0, 0, 50, 0x00007172, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x00007172, 251, 150, 149, 251, 150, 149},
}

var testDataLE32 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint32
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{12, 0, 250, 0x00000000, 0, 0, 1, 0, 1, 0},
	{12, 1, 250, 0x00010203, 1, 1, 0, 1, 2, 1},
	{12, 0, 250, 0x01020304, 2, 2, 1, 2, 3, 2},
	{12, 0, 250, 0x0f101112, 16, 16, 15, 16, 17, 16},
	{12, 0, 250, 0x10111213, 17, 17, 16, 17, 18, 17},
	{12, 0, 250, 0x1f202122, 32, 32, 31, 32, 33, 32},
	{12, 0, 250, 0x20212223, 33, 33, 32, 33, 34, 33},
	{12, 0, 250, 0x2f303132, 48, 48, 47, 48, 49, 48},
	{12, 0, 250, 0x30313233, 49, 49, 48, 49, 50, 49},
	{12, 0, 250, 0x3f404142, 64, 64, 63, 64, 65, 64},
	{12, 0, 250, 0x40414243, 65, 65, 64, 65, 66, 65},
	{12, 0, 250, 0x4f505152, 80, 80, 79, 80, 81, 80},
	{12, 0, 250, 0x50515253, 81, 81, 80, 81, 82, 81},
	{12, 0, 250, 0x5f606162, 96, 96, 95, 96, 97, 96},
	{12, 0, 250, 0x60616263, 97, 97, 96, 97, 98, 97},
	{12, 0, 250, 0x6f707172, 112, 112, 111, 112, 113, 112},
	{12, 0, 250, 0x70717273, 113, 113, 112, 113, 114, 113},
	{12, 0, 250, 0x7f808182, 128, 128, 127, 128, 129, 128},
	{12, 0, 250, 0x80818283, 129, 129, 128, 129, 130, 129},
	{12, 0, 250, 0x8f909192, 144, 144, 143, 144, 145, 144},
	{12, 0, 250, 0x90919293, 145, 145, 144, 145, 146, 145},
	{12, 0, 250, 0x9fa0a1a2, 160, 160, 159, 160, 161, 160},
	{12, 0, 250, 0xa0a1a2a3, 161, 161, 160, 161, 162, 161},
	{12, 0, 250, 0xafb0b1b2, 176, 176, 175, 176, 177, 176},
	{12, 0, 250, 0xb0b1b2b3, 177, 177, 176, 177, 178, 177},
	{12, 0, 250, 0xbfc0c1c2, 192, 192, 191, 192, 193, 192},
	{12, 0, 250, 0xc0c1c2c3, 193, 193, 192, 193, 194, 193},
	{12, 0, 250, 0xcfd0d1d2, 208, 208, 207, 208, 209, 208},
	{12, 0, 250, 0xd0d1d2d3, 209, 209, 208, 209, 210, 209},
	{12, 0, 250, 0xdfe0e1e2, 224, 224, 223, 224, 225, 224},
	{12, 0, 250, 0xe0e1e2e3, 225, 225, 224, 225, 226, 225},
	{12, 0, 250, 0xeff0f1f2, 240, 240, 239, 240, 241, 240},
	{12, 0, 250, 0xf0f1f2f3, 241, 241, 240, 241, 242, 241},
	{12, 0, 250, 0xf8f9fafb, 249, 249, 248, 249, 250, 249},
	{12, 0, 250, 0xffffffff, 250, 250, 249, 250, 251, 250},
	{12, 0, 250, 0xf9f9fafb, 251, 250, 249, 251, 250, 249},
	{12, 0, 50, 0x70717273, 51, 51, 50, 51, 51, 50},
	{12, 150, 250, 0x70717273, 251, 150, 149, 251, 150, 149},
}

var testDataLESub32 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint32
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{12, 0, 250, 0x00000000, 0, 0, 1, 0, 1, 0},
	{12, 1, 250, 0x00000102, 1, 1, 0, 1, 2, 1},
	{12, 0, 250, 0x00000203, 2, 2, 1, 2, 3, 2},
	{12, 0, 250, 0x00001011, 16, 16, 15, 16, 17, 16},
	{12, 0, 250, 0x00001112, 17, 17, 16, 17, 18, 17},
	{12, 0, 250, 0x00002021, 32, 32, 31, 32, 33, 32},
	{12, 0, 250, 0x00002122, 33, 33, 32, 33, 34, 33},
	{12, 0, 250, 0x00003031, 48, 48, 47, 48, 49, 48},
	{12, 0, 250, 0x00003132, 49, 49, 48, 49, 50, 49},
	{12, 0, 250, 0x00004041, 64, 64, 63, 64, 65, 64},
	{12, 0, 250, 0x00004142, 65, 65, 64, 65, 66, 65},
	{12, 0, 250, 0x00005051, 80, 80, 79, 80, 81, 80},
	{12, 0, 250, 0x00005152, 81, 81, 80, 81, 82, 81},
	{12, 0, 250, 0x00006061, 96, 96, 95, 96, 97, 96},
	{12, 0, 250, 0x00006162, 97, 97, 96, 97, 98, 97},
	{12, 0, 250, 0x00007071, 112, 112, 111, 112, 113, 112},
	{12, 0, 250, 0x00007172, 113, 113, 112, 113, 114, 113},
	{12, 0, 250, 0x00008081, 128, 128, 127, 128, 129, 128},
	{12, 0, 250, 0x00008182, 129, 129, 128, 129, 130, 129},
	{12, 0, 250, 0x00009091, 144, 144, 143, 144, 145, 144},
	{12, 0, 250, 0x00009192, 145, 145, 144, 145, 146, 145},
	{12, 0, 250, 0x0000a0a1, 160, 160, 159, 160, 161, 160},
	{12, 0, 250, 0x0000a1a2, 161, 161, 160, 161, 162, 161},
	{12, 0, 250, 0x0000b0b1, 176, 176, 175, 176, 177, 176},
	{12, 0, 250, 0x0000b1b2, 177, 177, 176, 177, 178, 177},
	{12, 0, 250, 0x0000c0c1, 192, 192, 191, 192, 193, 192},
	{12, 0, 250, 0x0000c1c2, 193, 193, 192, 193, 194, 193},
	{12, 0, 250, 0x0000d0d1, 208, 208, 207, 208, 209, 208},
	{12, 0, 250, 0x0000d1d2, 209, 209, 208, 209, 210, 209},
	{12, 0, 250, 0x0000e0e1, 224, 224, 223, 224, 225, 224},
	{12, 0, 250, 0x0000e1e2, 225, 225, 224, 225, 226, 225},
	{12, 0, 250, 0x0000f0f1, 240, 240, 239, 240, 241, 240},
	{12, 0, 250, 0x0000f1f2, 241, 241, 240, 241, 242, 241},
	{12, 0, 250, 0x0000f9fa, 249, 249, 248, 249, 250, 249},
	{12, 0, 250, 0x0000ffff, 250, 250, 249, 250, 251, 250},
	{12, 0, 250, 0x0000f9fa, 249, 249, 248, 249, 250, 249},
	{12, 0, 50, 0x00007172, 51, 51, 50, 51, 51, 50},
	{12, 150, 250, 0x00007172, 251, 150, 149, 251, 150, 149},
}

var testDataBE64 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint64
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x0000000000000000, 0, 0, 1, 0, 1, 0},
	{0, 1, 250, 0x0001020304050607, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x0102030405060708, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0f10111213141516, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x1011121314151617, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x1f20212223242526, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x2021222324252627, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x2f30313233343536, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x3031323334353637, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x3f40414243444546, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x4041424344454647, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x4f50515253545556, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x5051525354555657, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x5f60616263646566, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x6061626364656667, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x6f70717273747576, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x7071727374757677, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x7f80818283848586, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x8081828384858687, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x8f90919293949596, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x9091929394959697, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x9fa0a1a2a3a4a5a6, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0xa0a1a2a3a4a5a6a7, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0xafb0b1b2b3b4b5b6, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0xb0b1b2b3b4b5b6b7, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0xbfc0c1c2c3c4c5c6, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0xc0c1c2c3c4c5c6c7, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0xcfd0d1d2d3d4d5d6, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0xd0d1d2d3d4d5d6d7, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0xdfe0e1e2e3e4e5e6, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0xe0e1e2e3e4e5e6e7, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0xeff0f1f2f3f4f5f6, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0xf0f1f2f3f4f5f6f7, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0xf8f9fafbfcfdfeff, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0xffffffffffffffff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0xf9f9fafbfcfdfeff, 251, 250, 249, 251, 250, 249},
	{0, 0, 50, 0x7071727374757677, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x7071727374757677, 251, 150, 149, 251, 150, 149},
}

var testDataBESub64 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint64
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{0, 0, 250, 0x0000000000000000, 0, 0, 1, 0, 1, 0},
	{0, 1, 250, 0x0000000002030405, 1, 1, 0, 1, 2, 1},
	{0, 0, 250, 0x0000000003040506, 2, 2, 1, 2, 3, 2},
	{0, 0, 250, 0x0000000011121314, 16, 16, 15, 16, 17, 16},
	{0, 0, 250, 0x0000000012131415, 17, 17, 16, 17, 18, 17},
	{0, 0, 250, 0x0000000021222324, 32, 32, 31, 32, 33, 32},
	{0, 0, 250, 0x0000000022232425, 33, 33, 32, 33, 34, 33},
	{0, 0, 250, 0x0000000031323334, 48, 48, 47, 48, 49, 48},
	{0, 0, 250, 0x0000000032333435, 49, 49, 48, 49, 50, 49},
	{0, 0, 250, 0x0000000041424344, 64, 64, 63, 64, 65, 64},
	{0, 0, 250, 0x0000000042434445, 65, 65, 64, 65, 66, 65},
	{0, 0, 250, 0x0000000051525354, 80, 80, 79, 80, 81, 80},
	{0, 0, 250, 0x0000000052535455, 81, 81, 80, 81, 82, 81},
	{0, 0, 250, 0x0000000061626364, 96, 96, 95, 96, 97, 96},
	{0, 0, 250, 0x0000000062636465, 97, 97, 96, 97, 98, 97},
	{0, 0, 250, 0x0000000071727374, 112, 112, 111, 112, 113, 112},
	{0, 0, 250, 0x0000000072737475, 113, 113, 112, 113, 114, 113},
	{0, 0, 250, 0x0000000081828384, 128, 128, 127, 128, 129, 128},
	{0, 0, 250, 0x0000000082838485, 129, 129, 128, 129, 130, 129},
	{0, 0, 250, 0x0000000091929394, 144, 144, 143, 144, 145, 144},
	{0, 0, 250, 0x0000000092939495, 145, 145, 144, 145, 146, 145},
	{0, 0, 250, 0x00000000a1a2a3a4, 160, 160, 159, 160, 161, 160},
	{0, 0, 250, 0x00000000a2a3a4a5, 161, 161, 160, 161, 162, 161},
	{0, 0, 250, 0x00000000b1b2b3b4, 176, 176, 175, 176, 177, 176},
	{0, 0, 250, 0x00000000b2b3b4b5, 177, 177, 176, 177, 178, 177},
	{0, 0, 250, 0x00000000c1c2c3c4, 192, 192, 191, 192, 193, 192},
	{0, 0, 250, 0x00000000c2c3c4c5, 193, 193, 192, 193, 194, 193},
	{0, 0, 250, 0x00000000d1d2d3d4, 208, 208, 207, 208, 209, 208},
	{0, 0, 250, 0x00000000d2d3d4d5, 209, 209, 208, 209, 210, 209},
	{0, 0, 250, 0x00000000e1e2e3e4, 224, 224, 223, 224, 225, 224},
	{0, 0, 250, 0x00000000e2e3e4e5, 225, 225, 224, 225, 226, 225},
	{0, 0, 250, 0x00000000f1f2f3f4, 240, 240, 239, 240, 241, 240},
	{0, 0, 250, 0x00000000f2f3f4f5, 241, 241, 240, 241, 242, 241},
	{0, 0, 250, 0x00000000fafbfcfd, 249, 249, 248, 249, 250, 249},
	{0, 0, 250, 0x00000000ffffffff, 250, 250, 249, 250, 251, 250},
	{0, 0, 250, 0x00000000fafbfcfd, 249, 249, 248, 249, 250, 249},
	{0, 0, 50, 0x0000000072737475, 51, 51, 50, 51, 51, 50},
	{0, 150, 250, 0x0000000072737475, 251, 150, 149, 251, 150, 149},
}

var testDataLE64 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint64
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{8, 0, 250, 0x0000000000000000, 0, 0, 1, 0, 1, 0},
	{8, 1, 250, 0x0001020304050607, 1, 1, 0, 1, 2, 1},
	{8, 0, 250, 0x0102030405060708, 2, 2, 1, 2, 3, 2},
	{8, 0, 250, 0x0f10111213141516, 16, 16, 15, 16, 17, 16},
	{8, 0, 250, 0x1011121314151617, 17, 17, 16, 17, 18, 17},
	{8, 0, 250, 0x1f20212223242526, 32, 32, 31, 32, 33, 32},
	{8, 0, 250, 0x2021222324252627, 33, 33, 32, 33, 34, 33},
	{8, 0, 250, 0x2f30313233343536, 48, 48, 47, 48, 49, 48},
	{8, 0, 250, 0x3031323334353637, 49, 49, 48, 49, 50, 49},
	{8, 0, 250, 0x3f40414243444546, 64, 64, 63, 64, 65, 64},
	{8, 0, 250, 0x4041424344454647, 65, 65, 64, 65, 66, 65},
	{8, 0, 250, 0x4f50515253545556, 80, 80, 79, 80, 81, 80},
	{8, 0, 250, 0x5051525354555657, 81, 81, 80, 81, 82, 81},
	{8, 0, 250, 0x5f60616263646566, 96, 96, 95, 96, 97, 96},
	{8, 0, 250, 0x6061626364656667, 97, 97, 96, 97, 98, 97},
	{8, 0, 250, 0x6f70717273747576, 112, 112, 111, 112, 113, 112},
	{8, 0, 250, 0x7071727374757677, 113, 113, 112, 113, 114, 113},
	{8, 0, 250, 0x7f80818283848586, 128, 128, 127, 128, 129, 128},
	{8, 0, 250, 0x8081828384858687, 129, 129, 128, 129, 130, 129},
	{8, 0, 250, 0x8f90919293949596, 144, 144, 143, 144, 145, 144},
	{8, 0, 250, 0x9091929394959697, 145, 145, 144, 145, 146, 145},
	{8, 0, 250, 0x9fa0a1a2a3a4a5a6, 160, 160, 159, 160, 161, 160},
	{8, 0, 250, 0xa0a1a2a3a4a5a6a7, 161, 161, 160, 161, 162, 161},
	{8, 0, 250, 0xafb0b1b2b3b4b5b6, 176, 176, 175, 176, 177, 176},
	{8, 0, 250, 0xb0b1b2b3b4b5b6b7, 177, 177, 176, 177, 178, 177},
	{8, 0, 250, 0xbfc0c1c2c3c4c5c6, 192, 192, 191, 192, 193, 192},
	{8, 0, 250, 0xc0c1c2c3c4c5c6c7, 193, 193, 192, 193, 194, 193},
	{8, 0, 250, 0xcfd0d1d2d3d4d5d6, 208, 208, 207, 208, 209, 208},
	{8, 0, 250, 0xd0d1d2d3d4d5d6d7, 209, 209, 208, 209, 210, 209},
	{8, 0, 250, 0xdfe0e1e2e3e4e5e6, 224, 224, 223, 224, 225, 224},
	{8, 0, 250, 0xe0e1e2e3e4e5e6e7, 225, 225, 224, 225, 226, 225},
	{8, 0, 250, 0xeff0f1f2f3f4f5f6, 240, 240, 239, 240, 241, 240},
	{8, 0, 250, 0xf0f1f2f3f4f5f6f7, 241, 241, 240, 241, 242, 241},
	{8, 0, 250, 0xf8f9fafbfcfdfeff, 249, 249, 248, 249, 250, 249},
	{8, 0, 250, 0xffffffffffffffff, 250, 250, 249, 250, 251, 250},
	{8, 0, 250, 0xf9f9fafbfcfdfeff, 251, 250, 249, 251, 250, 249},
	{8, 0, 50, 0x7071727374757677, 51, 51, 50, 51, 51, 50},
	{8, 150, 250, 0x7071727374757677, 251, 150, 149, 251, 150, 149},
}

var testDataLESub64 = []struct {
	blkpos      uint64
	first       uint64
	last        uint64
	search      uint64
	foundFirst  uint64
	foundFFirst uint64
	foundFLast  uint64
	foundLast   uint64
	foundLFirst uint64
	foundLLast  uint64
}{
	{8, 0, 250, 0x0000000000000000, 0, 0, 1, 0, 1, 0},
	{8, 1, 250, 0x0000000002030405, 1, 1, 0, 1, 2, 1},
	{8, 0, 250, 0x0000000003040506, 2, 2, 1, 2, 3, 2},
	{8, 0, 250, 0x0000000011121314, 16, 16, 15, 16, 17, 16},
	{8, 0, 250, 0x0000000012131415, 17, 17, 16, 17, 18, 17},
	{8, 0, 250, 0x0000000021222324, 32, 32, 31, 32, 33, 32},
	{8, 0, 250, 0x0000000022232425, 33, 33, 32, 33, 34, 33},
	{8, 0, 250, 0x0000000031323334, 48, 48, 47, 48, 49, 48},
	{8, 0, 250, 0x0000000032333435, 49, 49, 48, 49, 50, 49},
	{8, 0, 250, 0x0000000041424344, 64, 64, 63, 64, 65, 64},
	{8, 0, 250, 0x0000000042434445, 65, 65, 64, 65, 66, 65},
	{8, 0, 250, 0x0000000051525354, 80, 80, 79, 80, 81, 80},
	{8, 0, 250, 0x0000000052535455, 81, 81, 80, 81, 82, 81},
	{8, 0, 250, 0x0000000061626364, 96, 96, 95, 96, 97, 96},
	{8, 0, 250, 0x0000000062636465, 97, 97, 96, 97, 98, 97},
	{8, 0, 250, 0x0000000071727374, 112, 112, 111, 112, 113, 112},
	{8, 0, 250, 0x0000000072737475, 113, 113, 112, 113, 114, 113},
	{8, 0, 250, 0x0000000081828384, 128, 128, 127, 128, 129, 128},
	{8, 0, 250, 0x0000000082838485, 129, 129, 128, 129, 130, 129},
	{8, 0, 250, 0x0000000091929394, 144, 144, 143, 144, 145, 144},
	{8, 0, 250, 0x0000000092939495, 145, 145, 144, 145, 146, 145},
	{8, 0, 250, 0x00000000a1a2a3a4, 160, 160, 159, 160, 161, 160},
	{8, 0, 250, 0x00000000a2a3a4a5, 161, 161, 160, 161, 162, 161},
	{8, 0, 250, 0x00000000b1b2b3b4, 176, 176, 175, 176, 177, 176},
	{8, 0, 250, 0x00000000b2b3b4b5, 177, 177, 176, 177, 178, 177},
	{8, 0, 250, 0x00000000c1c2c3c4, 192, 192, 191, 192, 193, 192},
	{8, 0, 250, 0x00000000c2c3c4c5, 193, 193, 192, 193, 194, 193},
	{8, 0, 250, 0x00000000d1d2d3d4, 208, 208, 207, 208, 209, 208},
	{8, 0, 250, 0x00000000d2d3d4d5, 209, 209, 208, 209, 210, 209},
	{8, 0, 250, 0x00000000e1e2e3e4, 224, 224, 223, 224, 225, 224},
	{8, 0, 250, 0x00000000e2e3e4e5, 225, 225, 224, 225, 226, 225},
	{8, 0, 250, 0x00000000f1f2f3f4, 240, 240, 239, 240, 241, 240},
	{8, 0, 250, 0x00000000f2f3f4f5, 241, 241, 240, 241, 242, 241},
	{8, 0, 250, 0x00000000fafbfcfd, 249, 249, 248, 249, 250, 249},
	{8, 0, 250, 0x00000000ffffffff, 250, 250, 249, 250, 251, 250},
	{8, 0, 250, 0x00000000fafbfcfd, 249, 249, 248, 249, 250, 249},
	{8, 0, 50, 0x0000000072737475, 51, 51, 50, 51, 51, 50},
	{8, 150, 250, 0x0000000072737475, 251, 150, 149, 251, 150, 149},
}

func TestMain(m *testing.M) {
	var err error

	// memory map the input file
	mf, err = MmapBinFile("../../c/test/data/test_data.bin")
	if err != nil {
		return
	}

	retCode := m.Run()

	// close the memory-mapped file
	err = mf.Close()
	if err != nil {
		retCode++
	}

	os.Exit(retCode)
}

func TestGetAddress(t *testing.T) {
	h := GetAddress(3, 5, 7)
	if h != 26 {
		t.Errorf("Expected 26, got %d", h)
	}
}

// ----------

func TestFindFirstBEUint8(t *testing.T) {
	for _, tt := range testDataBE8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstBEUint8(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextBEUint8(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstBEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstBEUint8(16, testDataBE8[4].blkpos, testDataBE8[4].first, testDataBE8[4].last, testDataBE8[4].search)
	}
}

func TestFindFirstSubBEUint8(t *testing.T) {
	for _, tt := range testDataBESub8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubBEUint8(16, tt.blkpos, 0, 7, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubBEUint8(16, tt.blkpos, 0, 7, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubBEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubBEUint8(16, testDataBESub8[4].blkpos, 0, 7, testDataBESub8[4].first, testDataBESub8[4].last, testDataBESub8[4].search)
	}
}

func TestFindLastBEUint8(t *testing.T) {
	for _, tt := range testDataBE8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastBEUint8(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevBEUint8(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastBEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastBEUint8(16, testDataBE8[4].blkpos, testDataBE8[4].first, testDataBE8[4].last, testDataBE8[4].search)
	}
}

func TestFindLastSubBEUint8(t *testing.T) {
	for _, tt := range testDataBESub8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubBEUint8(16, tt.blkpos, 0, 7, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubBEUint8(16, tt.blkpos, 0, 7, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubBEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubBEUint8(16, testDataBESub8[4].blkpos, 0, 7, testDataBESub8[4].first, testDataBESub8[4].last, testDataBESub8[4].search)
	}
}

func TestFindFirstLEUint8(t *testing.T) {
	for _, tt := range testDataLE8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstLEUint8(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextLEUint8(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstLEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstLEUint8(16, testDataLE8[4].blkpos, testDataLE8[4].first, testDataLE8[4].last, testDataLE8[4].search)
	}
}

func TestFindFirstSubLEUint8(t *testing.T) {
	for _, tt := range testDataLESub8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubLEUint8(16, tt.blkpos, 0, 7, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubLEUint8(16, tt.blkpos, 0, 7, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubLEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubLEUint8(16, testDataLESub8[4].blkpos, 0, 7, testDataLESub8[4].first, testDataLESub8[4].last, testDataLESub8[4].search)
	}
}

func TestFindLastLEUint8(t *testing.T) {
	for _, tt := range testDataLE8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastLEUint8(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevLEUint8(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastLEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastLEUint8(16, testDataLE8[4].blkpos, testDataLE8[4].first, testDataLE8[4].last, testDataLE8[4].search)
	}
}

func TestFindLastSubLEUint8(t *testing.T) {
	for _, tt := range testDataLESub8 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubLEUint8(16, tt.blkpos, 0, 7, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubLEUint8(16, tt.blkpos, 0, 7, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubLEUint8(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubLEUint8(16, testDataLESub8[4].blkpos, 0, 7, testDataLESub8[4].first, testDataLESub8[4].last, testDataLESub8[4].search)
	}
}

// ----------

func TestFindFirstBEUint16(t *testing.T) {
	for _, tt := range testDataBE16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstBEUint16(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextBEUint16(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstBEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstBEUint16(16, testDataBE16[4].blkpos, testDataBE16[4].first, testDataBE16[4].last, testDataBE16[4].search)
	}
}

func TestFindFirstSubBEUint16(t *testing.T) {
	for _, tt := range testDataBESub16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubBEUint16(16, tt.blkpos, 0, 15, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubBEUint16(16, tt.blkpos, 0, 15, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubBEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubBEUint16(16, testDataBESub16[4].blkpos, 0, 15, testDataBESub16[4].first, testDataBESub16[4].last, testDataBESub16[4].search)
	}
}

func TestFindLastBEUint16(t *testing.T) {
	for _, tt := range testDataBE16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastBEUint16(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevBEUint16(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastBEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastBEUint16(16, testDataBE16[4].blkpos, testDataBE16[4].first, testDataBE16[4].last, testDataBE16[4].search)
	}
}

func TestFindLastSubBEUint16(t *testing.T) {
	for _, tt := range testDataBESub16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubBEUint16(16, tt.blkpos, 0, 15, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubBEUint16(16, tt.blkpos, 0, 15, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubBEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubBEUint16(16, testDataBESub16[4].blkpos, 0, 15, testDataBESub16[4].first, testDataBESub16[4].last, testDataBESub16[4].search)
	}
}

func TestFindFirstLEUint16(t *testing.T) {
	for _, tt := range testDataLE16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstLEUint16(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextLEUint16(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstLEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstLEUint16(16, testDataLE16[4].blkpos, testDataLE16[4].first, testDataLE16[4].last, testDataLE16[4].search)
	}
}

func TestFindFirstSubLEUint16(t *testing.T) {
	for _, tt := range testDataLESub16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubLEUint16(16, tt.blkpos, 0, 15, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubLEUint16(16, tt.blkpos, 0, 15, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubLEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubLEUint16(16, testDataLESub16[4].blkpos, 0, 15, testDataLESub16[4].first, testDataLESub16[4].last, testDataLESub16[4].search)
	}
}

func TestFindLastLEUint16(t *testing.T) {
	for _, tt := range testDataLE16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastLEUint16(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevLEUint16(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastLEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastLEUint16(16, testDataLE16[4].blkpos, testDataLE16[4].first, testDataLE16[4].last, testDataLE16[4].search)
	}
}

func TestFindLastSubLEUint16(t *testing.T) {
	for _, tt := range testDataLESub16 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubLEUint16(16, tt.blkpos, 0, 15, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubLEUint16(16, tt.blkpos, 0, 15, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubLEUint16(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubLEUint16(16, testDataLESub16[4].blkpos, 0, 15, testDataLESub16[4].first, testDataLESub16[4].last, testDataLESub16[4].search)
	}
}

// ----------

func TestFindFirstBEUint32(t *testing.T) {
	for _, tt := range testDataBE32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstBEUint32(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextBEUint32(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstBEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstBEUint32(16, testDataBE32[4].blkpos, testDataBE32[4].first, testDataBE32[4].last, testDataBE32[4].search)
	}
}

func TestFindFirstSubBEUint32(t *testing.T) {
	for _, tt := range testDataBESub32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubBEUint32(16, tt.blkpos, 8, 23, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubBEUint32(16, tt.blkpos, 8, 23, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubBEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubBEUint32(16, testDataBESub32[4].blkpos, 8, 23, testDataBESub32[4].first, testDataBESub32[4].last, testDataBESub32[4].search)
	}
}

func TestFindLastBEUint32(t *testing.T) {
	for _, tt := range testDataBE32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastBEUint32(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevBEUint32(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastBEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastBEUint32(16, testDataBE32[4].blkpos, testDataBE32[4].first, testDataBE32[4].last, testDataBE32[4].search)
	}
}

func TestFindLastSubBEUint32(t *testing.T) {
	for _, tt := range testDataBESub32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubBEUint32(16, tt.blkpos, 8, 23, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubBEUint32(16, tt.blkpos, 8, 23, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubBEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubBEUint32(16, testDataBESub32[4].blkpos, 8, 23, testDataBESub32[4].first, testDataBESub32[4].last, testDataBESub32[4].search)
	}
}

func TestFindFirstLEUint32(t *testing.T) {
	for _, tt := range testDataLE32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstLEUint32(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextLEUint32(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstLEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstLEUint32(16, testDataLE32[4].blkpos, testDataLE32[4].first, testDataLE32[4].last, testDataLE32[4].search)
	}
}

func TestFindFirstSubLEUint32(t *testing.T) {
	for _, tt := range testDataLESub32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubLEUint32(16, tt.blkpos, 8, 23, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubLEUint32(16, tt.blkpos, 8, 23, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubLEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubLEUint32(16, testDataLESub32[4].blkpos, 8, 23, testDataLESub32[4].first, testDataLESub32[4].last, testDataLESub32[4].search)
	}
}

func TestFindLastLEUint32(t *testing.T) {
	for _, tt := range testDataLE32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastLEUint32(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevLEUint32(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastLEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastLEUint32(16, testDataLE32[4].blkpos, testDataLE32[4].first, testDataLE32[4].last, testDataLE32[4].search)
	}
}

func TestFindLastSubLEUint32(t *testing.T) {
	for _, tt := range testDataLESub32 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubLEUint32(16, tt.blkpos, 8, 23, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubLEUint32(16, tt.blkpos, 8, 23, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubLEUint32(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubLEUint32(16, testDataLESub32[4].blkpos, 8, 23, testDataLESub32[4].first, testDataLESub32[4].last, testDataLESub32[4].search)
	}
}

// ----------

func TestFindFirstBEUint64(t *testing.T) {
	for _, tt := range testDataBE64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstBEUint64(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextBEUint64(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstBEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstBEUint64(16, testDataBE64[4].blkpos, testDataBE64[4].first, testDataBE64[4].last, testDataBE64[4].search)
	}
}

func TestFindFirstSubBEUint64(t *testing.T) {
	for _, tt := range testDataBESub64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubBEUint64(16, tt.blkpos, 16, 47, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubBEUint64(16, tt.blkpos, 16, 47, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubBEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubBEUint64(16, testDataBESub64[4].blkpos, 16, 47, testDataBESub64[4].first, testDataBESub64[4].last, testDataBESub64[4].search)
	}
}

func TestFindLastBEUint64(t *testing.T) {
	for _, tt := range testDataBE64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastBEUint64(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevBEUint64(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastBEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastBEUint64(16, testDataBE64[4].blkpos, testDataBE64[4].first, testDataBE64[4].last, testDataBE64[4].search)
	}
}

func TestFindLastSubBEUint64(t *testing.T) {
	for _, tt := range testDataBESub64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubBEUint64(16, tt.blkpos, 16, 47, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubBEUint64(16, tt.blkpos, 16, 47, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubBEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubBEUint64(16, testDataBESub64[4].blkpos, 16, 47, testDataBESub64[4].first, testDataBESub64[4].last, testDataBESub64[4].search)
	}
}

func TestFindFirstLEUint64(t *testing.T) {
	for _, tt := range testDataLE64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstLEUint64(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextLEUint64(16, tt.blkpos, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstLEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstLEUint64(16, testDataLE64[4].blkpos, testDataLE64[4].first, testDataLE64[4].last, testDataLE64[4].search)
	}
}

func TestFindFirstSubLEUint64(t *testing.T) {
	for _, tt := range testDataLESub64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindFirstSubLEUint64(16, tt.blkpos, 16, 47, tt.first, tt.last, tt.search)
			if h != tt.foundFirst {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundFirst, h)
			}
			if f != tt.foundFFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundFFirst, f)
			}
			if l != tt.foundFLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundFLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasNextSubLEUint64(16, tt.blkpos, 16, 47, pos, tt.last, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindFirstSubLEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindFirstSubLEUint64(16, testDataLESub64[4].blkpos, 16, 47, testDataLESub64[4].first, testDataLESub64[4].last, testDataLESub64[4].search)
	}
}

func TestFindLastLEUint64(t *testing.T) {
	for _, tt := range testDataLE64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastLEUint64(16, tt.blkpos, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevLEUint64(16, tt.blkpos, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastLEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastLEUint64(16, testDataLE64[4].blkpos, testDataLE64[4].first, testDataLE64[4].last, testDataLE64[4].search)
	}
}

func TestFindLastSubLEUint64(t *testing.T) {
	for _, tt := range testDataLESub64 {
		tt := tt
		t.Run("", func(t *testing.T) {
			t.Parallel()
			h, f, l := mf.FindLastSubLEUint64(16, tt.blkpos, 16, 47, tt.first, tt.last, tt.search)
			if h != tt.foundLast {
				t.Errorf("Expected found 0x%x, got 0x%x", tt.foundLast, h)
			}
			if f != tt.foundLFirst {
				t.Errorf("Expected first 0x%x, got 0x%x", tt.foundLFirst, f)
			}
			if l != tt.foundLLast {
				t.Errorf("Expected last 0x%x, got 0x%x", tt.foundLLast, l)
			}
			numitems := tt.foundLast - tt.foundFirst + 1
			if (h <= tt.last) && (numitems > 0) {
				pos := h
				ret := true
				var counter uint64
				for ret {
					ret, pos = mf.HasPrevSubLEUint64(16, tt.blkpos, 16, 47, tt.first, pos, tt.search)
					counter++
				}
				if counter != numitems {
					t.Errorf("Expected next items %d, got %d", numitems, counter)
				}
			}
		})
	}
}

func BenchmarkFindLastSubLEUint64(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		mf.FindLastSubLEUint64(16, testDataLESub64[4].blkpos, 16, 47, testDataLESub64[4].first, testDataLESub64[4].last, testDataLESub64[4].search)
	}
}

// ----------

func TestClose(t *testing.T) {
	lmf, err := MmapBinFile("../../c/test/data/test_data.bin")
	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}
	err = lmf.Close()
	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}
}

func TestCloseError(t *testing.T) {
	lmf := TMMFile{}
	err := lmf.Close()
	if err == nil {
		t.Errorf("An error was expected")
	}
}

func TestMmapBinFileError(t *testing.T) {
	_, err := MmapBinFile("error")
	if err == nil {
		t.Errorf("An error was expected")
	}
}
